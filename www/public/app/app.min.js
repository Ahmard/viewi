function OnReady(e){var n=this;this.then=function(e){this.onOk=e},this.catch=function(e){this.onError=e},e(function(e){n.onOk(e)},function(){n.onError()})}console.log("app.js included");var ajax={get:function(e){return new OnReady(function(t,o){var r=new XMLHttpRequest;r.onreadystatechange=function(){var e,n;4===r.readyState&&(0===(e=r.status)||200<=e&&e<400?(n=r.getResponseHeader("Content-Type"),t("application/json"===n?JSON.parse(r.responseText):r.responseText)):o())},r.open("GET",e,!0),r.send()})}};function Edgeon(){var v=this;this.componentsUrl="/public/build/components.json",this.components={},this.start=function(){ajax.get(this.componentsUrl).then(function(e){v.components=e,v.render("HomePage")})};function g(e){var n=1<arguments.length&&arguments[1];if(e.expression){var t={call:!0},o=["_component","app"];return n&&o.push("event"),e.raw?o.push("return "+e.code+";"):o.push("return app.htmlentities("+e.code+");"),t.func=Function.apply(null,o),t}return{call:!1,content:e.content}}function m(e,n){if(e)try{var t,o,r;"("===n.content[0]?(t=n.content.substring(1,n.content.length-1),o=n.childs[0].contentExpression.func,console.log(e,t,n.childs),e.addEventListener(t,function(e){o(n.parent.instance,v,e)})):(r=n.childs?n.childs.select(function(e){return e.contentExpression.call?e.contentExpression.func(n.parent.instance,v):e.contentExpression.content}).join(""):"",e.setAttribute(n.content,r))}catch(e){console.error(e),console.log(n.content)}}function r(e,n,t){if(t){var o=n.parent&&n.parent.condition,r=o&&o.value;if(o&&!r)return null!==n.domNode&&(n.domNode.parentNode.removeChild(n.domNode),n.domNode=null),0}var i=[];for(var s in n.contents){var c=n.contents[s];i.push(c.call?c.func(n.instance,v):c.content)}var u=i.join(""),a=!1,d=!1;switch(n.type){case"text":if(e===document){a=document.childNodes[0];break}null!==n.domNode&&n.domNode.parentNode===e?(n.domNode.nodeValue=u,a=n.domNode):(a=document.createTextNode(u),e.appendChild(a),n.domNode=a);break;case"tag":if(e===document){a=document.childNodes[1],n.domNode=a;break}if("script"===u)return;if(a=document.createElement(u),null!==n.domNode)n.domNode.parentNode.replaceChild(a,n.domNode);else if(t){for(var l=!1,p=n;!l||l.isVirtual;)if(null!==p.previousNode)p=l=p.previousNode;else if(null===(p=l=p.parent).parent)return;var f=l.domNode.nextSibling;null!==f?f.parentNode.insertBefore(a,f):l.domNode.parentNode.appendChild(a)}else e.appendChild(a);if(n.domNode=a,n.attributes)for(var h in n.attributes)m(a,n.attributes[h]);break;case"if":n.condition.value=n.condition.func(n.instance,v),a=e,n.parentDomNode=e,n.topRealPreviousNode=n.parent.topRealPreviousNode||n.previousNode,d=!0;break;case"else-if":n.condition.value=!n.previousNode.condition.value&&n.condition.func(n.instance,v),n.condition.previousValue=n.previousNode.condition.value||n.condition.value,a=e,n.parentDomNode=e,n.topRealPreviousNode=n.parent.topRealPreviousNode||n.previousNode,d=!0;break;case"else":n.condition.value=!n.previousNode.condition.previousValue,a=e,n.parentDomNode=e,n.topRealPreviousNode=n.parent.topRealPreviousNode||n.previousNode,d=!0;break;default:throw new Error("Node type '"+n.type+"' is not implemented.")}a&&b(a,n.childs,d)}function i(e){return"__id"in e||(e.__id=++n),e.__id}function s(e,n){var t=i(e);t in u&&n in u[t]&&(o[t+"_"+n]=u[t][n],setTimeout(function(){!function(){for(var e in o)for(var n in o[e]){var t=o[e][n];t.isAttribute?m(t.parent.domNode,t):t.isVirtual?r(t.parentDomNode,t):r(t.domNode.parentNode,t)}o={}}()},0))}function c(e){var n=1<arguments.length?arguments[1]:e,t=2<arguments.length?arguments[2]:"this";if("__reactive"in e)return e;e.__reactive=!0;for(var o=Object.keys(e),r=0;r<o.length;r++)a(n,t+"."+o[r],e,o[r],e[o[r]]);return e}var w=["if","else-if","else","foreach"],x=["if","else-if","else"],E=[],O=function(e,n){var t=2<arguments.length&&arguments[2],o=3<arguments.length?arguments[3]:null,r=e.childs,i=[],s=!1,c=null,u={};for(var a in r){var d=r[a];if("text"===d.type&&s&&"text"===s.type){if(s.contents.push(g(d)),d.subs)for(var l in d.subs)j(s,d.subs[l])}else{var p=null;d.attributes&&(p=d.attributes.first(function(e){return-1!==w.indexOf(e.content)&&-1===E.indexOf(e.content)}));var f,h,v,m,b,N,y=!1,c=s={type:d.type,contents:[g(d)],domNode:null,parent:o,count:1,take:1,skip:!1,data:!1,instance:n,previousNode:c};if(null===p){if(0<E.length&&(E=[]),"component"===d.type&&(y=d.content),d.subs)for(var l in d.subs)j(s,d.subs[l]);"tag"!==d.type||"slot"!==d.content?(childNodes=!1,d.childs&&(childNodes=O(d,n,t,s)),d.attributes&&(s.attributes=d.attributes.where(function(e){return-1===w.indexOf(e.content)}).select(function(e){var o={},r="("===e.content[0];if(o.content=e.content,o.isAttribute=!0,o.parent=s,o.contentExpression=g(e),e.childs&&(o.childs=e.childs.select(function(e){var n={};if(n.contentExpression=g(e,r),n.content=e.content,e.subs&&!r)for(var t in e.subs)j(o,e.subs[t]);return n})),e.subs&&!r)for(var n in e.subs)j(o,e.subs[n]);return o})),y?(f=k(y,childNodes),i=i.concat(f)):(childNodes&&(s.childs=childNodes),i.push(s))):(h=d.attributes&&d.attributes.first(function(e){return"name"===e.content}),v=0,m=function(e){return!e.attributes},h&&(v=h.childs[0].content,m=function(e){return e.attributes&&e.attributes.first(function(e){return"name"===e.content&&e.childs[0].content===v})}),t&&(0===v?(b=t.where(function(e){return"slotContent"!==e.contents[0].content}),i=i.concat(b)):(N=t.first(function(e){return"tag"===e.type&&"slotContent"===e.contents[0].content&&m(e)}))&&(i=i.concat(N.childs))))}else{if(s.type=p.content,"if"===s.type&&(u={}),s.isVirtual=!0,E.push(p.content),s.childs=O({childs:[d]},n,t,s),-1!==x.indexOf(s.type)){for(var l in s.condition=p.childs?g(p.childs[0]):{},u)j(s,l);if(p.childs&&p.childs[0].subs)for(var l in p.childs[0].subs)j(s,p.childs[0].subs[l]),u[p.childs[0].subs[l]]=!0}i.push(s)}}}return i},b=function(e,n,t){for(var o in n)r(e,n[o],t)},n=0,o={},u={},j=function(e,n){var t=e.isAttribute?e.parent.instance:e.instance,o=i(t);o in u||(u[o]={}),n in u[o]||(u[o][n]=[]),u[o][n].push(e)},a=function(n,t,e,o,r){null!==r&&"object"==typeof r&&c(r,n,t),"function"!=typeof r&&Object.defineProperty(e,o,{enumerable:!0,configurable:!0,get:function(){return r},set:function(e){s(n,t),r=e}})},d=function(e){var n=v.components[e].dependencies;if(!n)return c(new window[e]);var arguments=[];for(var t in n){var o=n[t],r=null,r=o.default?o.default:o.builtIn?"string"===o.name?"":0:d(o.name);arguments.push(r)}return c(new(window[e].bind.apply(window[e],arguments)))},k=function(e,n){if(!(e in v.components))throw new Error("Component "+e+" doesn't exist.");var t=v.components[e],o=d(e);return console.log(o),O(t.nodes,o,n)};this.render=function(e){if(!e)throw new Error("Component name is required.");if(!(e in this.components))throw new Error("Component "+e+" doesn't exist.");var n=k(e);console.log(n),b(document,n,!1)},this.htmlentities=function(e){return"string"==typeof e?e.replace(/[\u00A0-\u9999<>\&]/gim,function(e){return"&#"+e.charCodeAt(0)+";"}):e}}Object.defineProperty(Array.prototype,"first",{enumerable:!1,value:function(e){for(var n in this){if(!e)return this[n];if(e(this[n]))return this[n]}return null}}),Object.defineProperty(Array.prototype,"where",{enumerable:!1,value:function(e){var n=[];for(var t in this)e(this[t])&&n.push(this[t]);return n}}),Object.defineProperty(Array.prototype,"select",{enumerable:!1,value:function(e){var n=[];for(var t in this)n.push(e(this[t]));return n}}),Object.defineProperty(Array.prototype,"each",{enumerable:!1,value:function(e){for(var n in this)e(this[n],n);return this}});var app=new Edgeon;app.start();